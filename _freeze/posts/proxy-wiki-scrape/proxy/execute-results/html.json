{
  "hash": "479c8d24f1536c6bc1958b815ec5e43a",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Proxy Wars - Scraping data from Wikipedia\"\nslug: wikiscrape\ndate: \"Aug 8, 2023\"\ncategories: [scraping, R, combat]\ndescription: 'Scrape Wikipedia for proxy war data'\nformat:\n  html:\n    # embed-resources: true\n    code-fold: true\n    code-tools:\n      source: false\n      toggle: true\n      caption: \"Show the code\"\n    code-summary: \"Show the code\"\n    #theme: flatly\n    #theme: slate\n    #keep-md: true\neditor: visual\ntoc: true\n#number-sections: true\nexecute: \n  warning: false\n  message: false\n  error: false\n  echo: true\n# editor_options: \n#   chunk_output_type: console\n# image: \"image.jpeg\"\n---\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](image.jpeg){fig-align='center' width=1700}\n:::\n:::\n\n\n\n\n[Image source: Virginia Tech Publishing](https://twitter.com/VirginiaTechPub?ref_src=twsrc%5Etfw%7Ctwcamp%5Etweetembed%7Ctwterm%5E1286360278993637376%7Ctwgr%5Efc9afc3148e3ac140d50294d58f2ab0d0e5d5221%7Ctwcon%5Es1_&ref_url=https%3A%2F%2Fpublishing.vt.edu%2Fsite%2Fbooks%2Fm%2F10.21061%2Fproxy-wars-maguire%2F)\n\nViolence, conflict, and proxy warfare -- all on a blissful, dreamy Sunday afternoon. Actually, I was listening to an NPR discussion on an afternoon drive that referenced the work of the [Proxy War Project out of Virginia Tech](https://publishing.vt.edu/site/books/series/pwp-conflict-studies/). As a data geek, the next obvious question is: Gee, where can I find data on that?\n\nWhat does the general public think of regarding proxy warfare? Is it a rag tag group of thugs funded by a dark agency and left to run around the forest? Or maybe proxy wars are a relic of the cold war? To the contrary, [according to War on the Rocks](https://warontherocks.com/2021/09/the-return-of-great-power-proxy-wars/) (a super cool site on all things war and conflict), \"\\[e\\]vents of the last decade suggest the increasing salience of such conflicts.\" The blog goes on to say that \"\\[p\\]roxy wars are poised to be a...significant factor in the evolving strategic environment.\"\n\nSo, as soon as I got home, I jumped online for a quick search for some data. The first thing I found [was the Wikipedia page](https://en.wikipedia.org/wiki/List_of_proxy_wars). It most certainly is not the most comprehensive data, but it has a nice feature: A helpful Wiki contributor created a typology of proxy wars. I decided to scrape it to started some initial exploration.\n\nI'm not intending for this to be a deep dive into coding nor proxy war dynamics. This is just a quick and dirty scrape of Wikipedia data to get a sense of what's going.\n\n## Scraping and Cleaning Wikipedia Data\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# libraries\nlibrary(rvest)\nlibrary(tidyverse)\nlibrary(kableExtra)\nsource(\"my_gg_theme.R\")\n\n# Scrape the tables from the page\nproxy_tables <- \n  read_html('https://en.wikipedia.org/wiki/List_of_proxy_wars') %>%\n  html_table(fill = TRUE) %>% \n  # set names based on Wikipedia names\n  set_names(\n    c(\n      'Caveat',\n      'Series', \n      'Pre-World War I proxy wars', \n      'Inter-war period proxy wars',\n      'Cold War proxy wars',\n      'Modern proxy wars',\n      'Ongoing proxy wars'\n    )) \n```\n:::\n\n\n\n\nThe Wikipedia page displays the following caveat:\n\n> This article or section appears to be slanted towards recent events. Please try to keep recent events in historical perspective and add more content related to non-recent events. (October 2022)\n\nWikipedia spread the data across a number of tables. To prep the data for plotting, I put them into one big data frame and did some minor cleaning. In particular, the dates were a little jenky. The resulting data looks like:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# data cleaning\nproxy_data_df <- \n  # drop unneeded data\n  proxy_tables[-c(1,2)] %>% \n  map2_df(\n    names(proxy_tables[-c(1,2)]),\n    ~mutate(.x, war_type = .y)) %>% \n  janitor::clean_names() %>% \n  separate(\n    dates, \n    into = c('start_year', 'end_year'), \n    sep = \"–\") %>%\n  mutate(across(\n    start_year:end_year,\n    ~ str_extract(.x, '[0-9]{4}') %>% \n      as.numeric(.x))) %>% \n  mutate(across(\n    c(war, combatant_1, combatant_1, result),\n    ~ str_remove(., \"\\\\[.*\\\\]$\")))\n\nproxy_data_df %>% \n  slice_head(n = 5) %>% \n  knitr::kable() %>%\n  kable_styling(font_size = 7)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"font-size: 7px; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> war </th>\n   <th style=\"text-align:right;\"> start_year </th>\n   <th style=\"text-align:right;\"> end_year </th>\n   <th style=\"text-align:left;\"> combatant_1 </th>\n   <th style=\"text-align:left;\"> combatant_2 </th>\n   <th style=\"text-align:left;\"> result </th>\n   <th style=\"text-align:left;\"> war_type </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Sicilian Expedition </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Delian League (led by Athens)SegestaEtruscans </td>\n   <td style=\"text-align:left;\"> Peloponnesian League (led by Sparta)CorinthSyracuse </td>\n   <td style=\"text-align:left;\"> Spartan-Syracusan victory </td>\n   <td style=\"text-align:left;\"> Pre-World War I proxy wars </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Egyptian–Ottoman War </td>\n   <td style=\"text-align:right;\"> 1839 </td>\n   <td style=\"text-align:right;\"> 1841 </td>\n   <td style=\"text-align:left;\"> EgyptAllies: France Spain </td>\n   <td style=\"text-align:left;\"> Ottoman EmpireAllies: United Kingdom Austria Russia Prussia </td>\n   <td style=\"text-align:left;\"> Ottoman victory[3]Egyptian retrocession of Syria, Crete, and the Hejaz to the Ottoman Empire </td>\n   <td style=\"text-align:left;\"> Pre-World War I proxy wars </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Uruguayan Civil War </td>\n   <td style=\"text-align:right;\"> 1839 </td>\n   <td style=\"text-align:right;\"> 1851 </td>\n   <td style=\"text-align:left;\"> .mw-parser-output .plainlist ol,.mw-parser-output .plainlist ul{line-height:inherit;list-style:none;margin:0;padding:0}.mw-parser-output .plainlist ol li,.mw-parser-output .plainlist ul li{margin-bottom:0}\n Colorados\n Gobierno de la Defensa (since 1843)\n Unitarians\n Empire of Brazil (since 1851)\n Entre Ríos (from 1851)\n Corrientes (from 1851)\n France\n United Kingdom\n Riograndense Republic (1839–1845)\n Italian </td>\n   <td style=\"text-align:left;\"> edshirts |Blancos\n\n Gobierno del Cerrito (since 1843)\n Federalists\n Lavallejistas\n Argentine Confederation\n Entre Ríos (until 1851) </td>\n   <td style=\"text-align:left;\"> |Colorado victory </td>\n   <td style=\"text-align:left;\"> |Pre-World W </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> First Samoan Civil War </td>\n   <td style=\"text-align:right;\"> 1886 </td>\n   <td style=\"text-align:right;\"> 1894 </td>\n   <td style=\"text-align:left;\"> 1887–1889 Supporters of Tupua Tamasese German Empire\n\n1893–1894 Supporters of M. LaupepaSupported by: German Empire British Empire United States </td>\n   <td style=\"text-align:left;\"> |1887–1889 Supporters of Mata'afaSupported by: United States\n\n1893–1894 Supporters of Mata'afa (1893)Supporters of Tamasese Lealofi (18 </td>\n   <td style=\"text-align:left;\"> 4) |Stalemate\nMalietoa Laupepa restored to power in 1889\nBerlin General Act creates new government structure\nChallenges to Laupepa's authority in 1893–1894 defeated </td>\n   <td style=\"text-align:left;\"> |Pre-World War I prox </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Second Samoan Civil War </td>\n   <td style=\"text-align:right;\"> 1898 </td>\n   <td style=\"text-align:right;\"> 1899 </td>\n   <td style=\"text-align:left;\"> MataafansSupported by: Germany </td>\n   <td style=\"text-align:left;\"> Allies: Samoa United States United Kingdom </td>\n   <td style=\"text-align:left;\"> Compromise;\nTripartite Convention\nPartitioning of the Samoan archipelago\nUnited States acquires American Samoa\nGermany acquires German Samoa\nBritain withdraws claim in exchange for concessions in the Solomon Islands\nMata'afa Iosefo becomes paramount chief of </td>\n   <td style=\"text-align:left;\"> amoa |Pre-World War I proxy </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n## Plotting war duration\n\nTo avoid rewriting a bunch of code, let's create a little function to select the war-type of choice and plot the data. (Note, the plotting code was a little long and distracting, so I pushed some of it to a source script.)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# a function to select war type and plot\nwar_plot <- function(df, type) {\n  df2 <- df |>\n    dplyr::filter(\n      war_type == type, \n      !is.na(start_year)) |>\n    dplyr::mutate(\n      # one ordered factor for plotting; drop unused levels\n      war_ord = forcats::fct_drop(forcats::fct_reorder(\n        war, \n        -start_year, \n        .na_rm = TRUE)),\n      # if end_year is missing, use start_year so segment has zero length (still draws)\n      end_year = dplyr::coalesce(\n        end_year, \n        start_year)\n    )\n  \n  df2 |> ggplot(aes(x = war_ord, \n                    y = start_year)) +\n    geom_segment(aes(xend = war_ord, \n                     yend = end_year),\n                 color = \"cadetblue\", \n                 alpha = 0.75\n    ) +\n    geom_point(size = 3, \n               alpha = 0.8, \n               color = \"orange\") +\n    geom_point(aes(y = end_year), \n               size = 3, \n               alpha = 0.8, \n               color = \"cadetblue\") +\n    coord_flip() +\n    labs(x = NULL, \n         y = NULL, \n         title = type) +\n    quick_gg_theme()\n}\n```\n:::\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\nwar_plot(proxy_data_df, \"Pre-World War I proxy wars\")\n```\n\n::: {.cell-output-display}\n![](proxy_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\nwar_plot(proxy_data_df, 'Inter-war period proxy wars')\n```\n\n::: {.cell-output-display}\n![](proxy_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n:::\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\nwar_plot(proxy_data_df, 'Modern proxy wars')\n```\n\n::: {.cell-output-display}\n![](proxy_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code}\nwar_plot(proxy_data_df, 'Ongoing proxy wars')\n```\n\n::: {.cell-output-display}\n![](proxy_files/figure-html/unnamed-chunk-4-2.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nwar_plot(proxy_data_df, 'Cold War proxy wars')\n```\n\n::: {.cell-output-display}\n![](proxy_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n\n## Wrap up\n\nFirst, that's a lot o' proxy wars. Of course, there's clearly a few problems with the data. Some dates are missing. And I'm suspicious about the ongoing proxy wars. Are they all really still ongoing?\n\nThe Cold War was fertile ground for proxy wars. I guess it makes sense, right? Cold wars are characterized by indirect conflict, working through proxies, pawns, and agents of mayhem.\n\nGiven that proxy wars are frequently a means for \"agents\" to have deniability regarding the havoc they are wrecking, there is likely a large number of unreported/undiscovered agent-proxy relationships.\n\nIt might be interesting to parse the text-based columns and see which actors are most frequently leveraging proxies, and in what parts of the world...another day...\n",
    "supporting": [
      "proxy_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}